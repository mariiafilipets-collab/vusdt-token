const fs = require('fs');
const path = require('path');

console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ VUSDT...\n');

let allGood = true;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫
const requiredDirs = [
  'contracts',
  'scripts',
  'test',
  'frontend',
  'frontend/src',
  'frontend/src/components',
  'frontend/src/hooks'
];

console.log('üìÅ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫...');
requiredDirs.forEach(dir => {
  if (fs.existsSync(dir)) {
    console.log(`  ‚úÖ ${dir}`);
  } else {
    console.log(`  ‚ùå ${dir} - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!`);
    allGood = false;
  }
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
const requiredFiles = [
  'contracts/VUSDT.sol',
  'contracts/YieldDistributor.sol',
  'scripts/deploy.js',
  'scripts/distribute-yield.js',
  'test/VUSDT.test.js',
  'test/YieldDistributor.test.js',
  'hardhat.config.js',
  'package.json',
  'frontend/package.json',
  'frontend/src/App.js',
  'frontend/src/index.js'
];

console.log('\nüìÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤...');
requiredFiles.forEach(file => {
  if (fs.existsSync(file)) {
    console.log(`  ‚úÖ ${file}`);
  } else {
    console.log(`  ‚ùå ${file} - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!`);
    allGood = false;
  }
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ node_modules
console.log('\nüì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...');
if (fs.existsSync('node_modules')) {
  console.log('  ‚úÖ Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã');
} else {
  console.log('  ‚ùå Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm install');
  allGood = false;
}

if (fs.existsSync('frontend/node_modules')) {
  console.log('  ‚úÖ Frontend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã');
} else {
  console.log('  ‚ùå Frontend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: cd frontend && npm install');
  allGood = false;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–æ–≤
console.log('\n‚öôÔ∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...');
if (fs.existsSync('.env')) {
  console.log('  ‚úÖ .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
} else {
  console.log('  ‚ö†Ô∏è  .env —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–∑ .env.example');
  console.log('     –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤');
}

if (fs.existsSync('frontend/.env')) {
  console.log('  ‚úÖ frontend/.env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç');
} else {
  console.log('  ‚ö†Ô∏è  frontend/.env —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤');
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
console.log('\nüî® –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏...');
if (fs.existsSync('artifacts/contracts/VUSDT.sol/VUSDT.json')) {
  console.log('  ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã');
} else {
  console.log('  ‚ö†Ô∏è  –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: npx hardhat compile');
}

console.log('\n' + '='.repeat(50));
if (allGood) {
  console.log('‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã! –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.');
  console.log('\nüìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:');
  console.log('  1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º PRIVATE_KEY');
  console.log('  2. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: npm run deploy:testnet');
  console.log('  3. –û–±–Ω–æ–≤–∏—Ç–µ frontend/.env —Å –∞–¥—Ä–µ—Å–∞–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤');
  console.log('  4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥: cd frontend && npm start');
} else {
  console.log('‚ö†Ô∏è  –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.');
}
console.log('='.repeat(50));

process.exit(allGood ? 0 : 1);

